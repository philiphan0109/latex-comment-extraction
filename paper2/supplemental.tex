\documentclass[doubleblind]{ecai} 
%\documentclass{ecai}
% \usepackage{aaai24}

\usepackage{natbib}
% \usepackage{times}
% \usepackage{helvet}
% \usepackage{courier}
\usepackage{lipsum} 
\usepackage{xspace}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage[dvipsnames]{xcolor}
\usepackage{tikz}
\usepackage{pgfplots}
\usetikzlibrary{pgfplots.statistics}
\usepackage[ruled,vlined,linesnumbered]{algorithm2e}
\usepackage{subcaption}
\usetikzlibrary{decorations.pathreplacing,calc}
\usepackage{soul}
\frenchspacing

\newcommand{\daniel}[1]{\textcolor{blue}{#1}}
\newcommand{\alberto}[1]{\textcolor{red}{#1}}
\newcommand{\ram}[1]{\textcolor{brown}{#1}}
\newcommand{\zz}[1]{\textcolor{orange}{#1}}
\newcommand{\gpt}{{\sc GPT-4}\xspace}
\newcommand{\approach}{\ensuremath{\textsc{TRIP-PAL}}\xspace}

% \setlength{\pdfpagewidth}{8.5in}
% \setlength{\pdfpageheight}{11in}

\pdfinfo{
/Title (Suppl_Travel Planning with Guarantees via LLM and Planner)
/Author (Put All Your Authors Here, Separated by Commas)}
%\setcounter{secnumdepth}{1}  
 
\begin{document}
% The file aaai.sty is the style file for AAAI Press 
% proceedings, working notes, and technical reports.
%

\begin{frontmatter}
\paperid{1549}
\title{Supplemental to \approach: Travel Planning with Guarantees by Combining Large Language Models and Automated Planners}
\author{Authors}

%% \maketitle


\end{frontmatter}

%NOTE: ask legal about the usage of google API, openai API in our project

% \section{Notes and alternative wordings}
%Automated planning is an approach that takes a model of the domain and an initial state to generate a sequence of actions that achieve the goals specified by the user. 

% Planning tasks can be formally described as a set of states and a set of actions that create a graph, where the solution to a problem consists of finding a path (plan) that connects the initial state with a goal state.



\section{ Prompt Engineering for Single Day Travel Plans}
In this section we present the prompts we tried. For each step we used the first prompt in the associated list. 
We employed different techniques learned to highlight information such as using two asterisk around words ($**<words>**$) to highlight points as training data for LLM includes markdown files in which the asterisks are used to make words bold. We also tried variations such as changing representation time from AM and PM to military time to get more valid travel plans from \gpt.

With each prompt, the particular format that we ask the output to be in, is to help us parse the output and build python data structures, which is subsequently fed into the UPF library for automated planning. The city name and other variable values used in the prompt are grounded examples; in the code, the city name and other variables are inserted for each experiment.

\subsection{Prompts for Generating POIs}
\begin{itemize}
    \item \textit{Give me a list of 10 tourist points of interest by their full name for the city of Paris. Present it as a comma separated list of places like placeA, place B, place C. No numbers.}    
    \item \textit{Give me a list of 10 tourist places for the city of Paris. Present it as a comma separated list of places like placeA, place B, place C. No numbers.}
    \item \textit{Give me a list of 10 tourist places for the city of Paris}
\end{itemize}
%--------------------------------------------------------------
\subsection{Prompts for Obtaining POI Utility}
\begin{itemize}
    \item \textit{Given, this information, for the places mentioned, assign a number from 1 to 5 based on how popular they are for tourists. For example location one = 2 $\backslash{n}$ location two = 4 $\backslash{n}$ location three = 1 ... put each entry on a new line}
    \item \textit{"For the places mentioned, assign a number from 1 to 5 based on how popular they are for tourists. For example, location one = 2, location two = 4, location three = 1 ..."}
    % \item \textit{}
\end{itemize}
%--------------------------------------------------------------
\subsection{Prompts for Obtaining Time to Spend in POI}

The prompt and output of the generated POI list is fed in as the prefix context, before the next prompt asking for utility is added. The prompts we tried to get utility values are below.
\begin{itemize}
    \item \textit{For the places and popularity mentioned, assign the amount of time one should spend at each of the locations.
        The amount of time should be in chunks of 15 minutes, and give the time in minutes not hours.For example
        location one = 15 minutes $\backslash{n}$ location two = 30 minutes $\backslash{n}$ location three = 75 minutes ... put each entry on a new line}
    \item \textit{For the places and popularity mentioned, assign the amount of time one should spend at each of the locations. The amount of time should be in chunks of 15 minutes, and give the time in minutes not hours. For example, location one = 15 minutes, location two = 30 minutes, location three = 75 minutes ... put each entry on a new line}
    
\end{itemize}

%--------------------------------------------------------------

\subsection{Prompts for Generating Travel Plan in \gpt}

This was perhaps the most challenging step or prompt to adjust. We leveraged techniques like emphasizing words using $**$ to get better overall outcomes. 

\begin{itemize}
    \item \textit{Given the following information after the output format below, generate a travel plan for day in Paris
         between  8:00 and 16:00.
         The plan does ** NOT ** have to visit every place, only that the travel time starts at  8:00 and ends at 16:00, 
         and better places are visited based on the rating information given, and the duration of the visit conforms to the information below. $\backslash{n}$
         Ignore meal times, just focus on the places to visit$\backslash{n}$
         Assume we start at the location of the first place. The format of the plan should be like
         (visit place$\_$1 9:00 ) $\backslash{n}$ (drive place$\_$1 to place$\_$2 10:00 ) $\backslash{n}$ (visit place$\_$2 11:30 ) (drive place$\_$2 to place$\_$3 13:30 ) ...and so forth $\backslash{n}$ 
         for the time in each step, only specify the end time of the activity and assume the first one starts at 8:00 
         If a place has spaces in the name, replace with underscore$\backslash{n}$          
         DO NOT put numbers in the list ordering and do not write anything before or after the travel plan.$\backslash{n}$}
         
    \item \textit{Given the following information after the output format below, generate a travel plan for a day in Paris between 8:00 AM and 4:00 PM. The plan does NOT have to visit every place, only that the travel time is between 8:00 AM and 4:00 PM and better places are visited. Ignore meal times and exact time of day, just the order of places to visit.
    Assume we start at the location of the first place. The format of the plan should be like (visit place$\_$1 9:00) (drive place$\_$1 to place$\_$2 10:00) (visit place$\_$2 11:30) (drive place$\_$2 to place$\_$3 1:30) ...and so forth. For the time in each step, only specify the end time of the activity and assume the first one starts at 8:00. If a place has spaces in the name, replace with underscore. DO NOT put numbers in the list ordering and do not write anything before or after the travel plan}
   
\end{itemize}
%--------------------------------------------------------------

% \subsection{Prompts for}
% \begin{itemize}
%     \item 
%     \item 
% \end{itemize}



\section {Full Example of Plan Generation}

In this section we present an end-to-end example of the travel planning process using \gpt and the \approach method.
We use the setting of a single-day travel plan for Madrid with 10 hours of total travel time. We ask \gpt to get a set of 10 points of interest along with travel times between them, visit times, and a rating for tourist value. We chose not to arbitrarily set ratings for places so as to align with information in \gpt; this is to make case-based planning easier for \gpt. 

\begin{itemize}

    \item Obtaining POI: 
    \item Obtaining ratings for POI: 
    \item Obtaining visit times for POI: 
    \item Determining travel times between POI: 
    
\end{itemize}

Thus far we have extracted the fundamental information needed to generate a travel plan. Next we query \gpt for it's travel plan and compare against the plan generated by an automated planner using the same information. 

The Query used for \gpt was:\textit{}

% USE GPT TO EXTRACT PROMPTS !! copy paste prev versions from github

%By leveraging LLMs for automatic parsing of user requests into planning problem formulations and utilizing planners for explicit optimization, our method ensures the generation of valid and preference-aligned travel plans.

\subsection{Prompt and Context for \gpt planning}

The prompt and context together was input to \gpt for asking for a travel plan

The prompt was
\textit{Given the following information after the output format below, generate a travel plan for day in Paris between 8:00 and 14:00. The plan does ** NOT ** have to visit every place, only that the travel time starts at 8:00 and ends at 14:00and better places are visited based on the rating information given, and the duration of the visit conforms to the information below. 
Ignore meal times, just focus on the places to visit
Assume we start at the location of the first place. The format of the plan should be like
 (visit place$\_$1 9:00 ) $\backslash{n}$ (drive place$\_$1 to place$\_$2 10:00 ) $\backslash{n}$ (visit place$\_$2 11:30 ) (drive place$\_$2 to place$\_$3 13:30 ) ...and so forth $\backslash{n}$ 
 for the time in each step, only specify the end time of the activity and assume the first one starts at 8:00 
 If a place has spaces in the name, replace with underscore$\backslash{n}$          
 DO NOT put numbers in the list ordering and do not write anything before or after the travel plan.$\backslash{n}$}



The context provided to \gpt for planning is below, and this follows the prompt we gave for asking GPT to plan.

\textit{Place of interest are 
Eiffel Tower, Louvre Museum, Notre-Dame Cathedral, Sacré-Cœur Basilica, Palace of Versailles, Champs-Élysées, Montmartre, Sainte-Chapelle, Centre Pompidou, Musée d'Orsay
 The ratings of these place are 
Eiffel Tower = 5
Louvre Museum = 5
Notre-Dame Cathedral = 4
Sacré-Cœur Basilica = 4
Palace of Versailles = 5
Champs-Élysées = 4
Montmartre = 3
Sainte-Chapelle = 3
Centre Pompidou = 2
Musée d'Orsay = 4
 The time needed to vist these place are 
Eiffel Tower = 120 minutes
Louvre Museum = 180 minutes
Notre-Dame Cathedral = 60 minutes
Sacré-Cœur Basilica = 60 minutes
Palace of Versailles = 240 minutes
Champs-Élysées = 90 minutes
Montmartre = 75 minutes
Sainte-Chapelle = 45 minutes
Centre Pompidou = 90 minutes
Musée d'Orsay = 120 minutes
 The travel time to go between each of these place are as follows,and assume the travel time is in multiples of 15 minutes rounding up, so the minimum is 15 minutes.
Travel time from eiffel tower, Paris to louvre museum, Paris is 8 mins
Travel time from eiffel tower, Paris to notre$\_$dame cathedral, Paris is 13 mins
Travel time from eiffel tower, Paris to sacr$\_$cur basilica, Paris is 14 mins
Travel time from eiffel tower, Paris to palace of versailles, Paris is 35 mins
Travel time from eiffel tower, Paris to champs$\_$lyses, Paris is 14 mins
Travel time from eiffel tower, Paris to montmartre, Paris is 23 mins
Travel time from eiffel tower, Paris to sainte$\_$chapelle, Paris is 16 mins
Travel time from eiffel tower, Paris to centre pompidou, Paris is 18 mins
Travel time from eiffel tower, Paris to muse dorsay, Paris is 9 mins
Travel time from louvre museum, Paris to eiffel tower, Paris is 11 mins
Travel time from louvre museum, Paris to notre$\_$dame cathedral, Paris is 6 mins
Travel time from louvre museum, Paris to sacr$\_$cur basilica, Paris is 8 mins
Travel time from louvre museum, Paris to palace of versailles, Paris is 45 mins
Travel time from louvre museum, Paris to champs$\_$lyses, Paris is 8 mins
Travel time from louvre museum, Paris to montmartre, Paris is 23 mins
Travel time from louvre museum, Paris to sainte$\_$chapelle, Paris is 8 mins
Travel time from louvre museum, Paris to centre pompidou, Paris is 11 mins
Travel time from louvre museum, Paris to muse dorsay, Paris is 4 mins
Travel time from notre$\_$dame cathedral, Paris to eiffel tower, Paris is 15 mins
Travel time from notre$\_$dame cathedral, Paris to louvre museum, Paris is 7 mins
Travel time from notre$\_$dame cathedral, Paris to sacr$\_$cur basilica, Paris is 7 mins
Travel time from notre$\_$dame cathedral, Paris to palace of versailles, Paris is 49 mins
Travel time from notre$\_$dame cathedral, Paris to champs$\_$lyses, Paris is 7 mins
Travel time from notre$\_$dame cathedral, Paris to montmartre, Paris is 27 mins
Travel time from notre$\_$dame cathedral, Paris to sainte$\_$chapelle, Paris is 2 mins
Travel time from notre$\_$dame cathedral, Paris to centre pompidou, Paris is 10 mins
Travel time from notre$\_$dame cathedral, Paris to muse dorsay, Paris is 8 mins
Travel time from sacr$\_$cur basilica, Paris to eiffel tower, Paris is 17 mins
Travel time from sacr$\_$cur basilica, Paris to louvre museum, Paris is 10 mins
Travel time from sacr$\_$cur basilica, Paris to notre$\_$dame cathedral, Paris is 3 mins
Travel time from sacr$\_$cur basilica, Paris to palace of versailles, Paris is 46 mins
Travel time from sacr$\_$cur basilica, Paris to champs$\_$lyses, Paris is 1 mins
Travel time from sacr$\_$cur basilica, Paris to montmartre, Paris is 25 mins
Travel time from sacr$\_$cur basilica, Paris to sainte$\_$chapelle, Paris is 5 mins
Travel time from sacr$\_$cur basilica, Paris to centre pompidou, Paris is 8 mins
Travel time from sacr$\_$cur basilica, Paris to muse dorsay, Paris is 11 mins
Travel time from palace of versailles, Paris to eiffel tower, Paris is 32 mins
Travel time from palace of versailles, Paris to louvre museum, Paris is 37 mins
Travel time from palace of versailles, Paris to notre$\_$dame cathedral, Paris is 42 mins
Travel time from palace of versailles, Paris to sacr$\_$cur basilica, Paris is 43 mins
Travel time from palace of versailles, Paris to champs$\_$lyses, Paris is 43 mins
Travel time from palace of versailles, Paris to montmartre, Paris is 46 mins
Travel time from palace of versailles, Paris to sainte$\_$chapelle, Paris is 44 mins
Travel time from palace of versailles, Paris to centre pompidou, Paris is 46 mins
Travel time from palace of versailles, Paris to muse dorsay, Paris is 37 mins
Travel time from champs$\_$lyses, Paris to eiffel tower, Paris is 17 mins
Travel time from champs$\_$lyses, Paris to louvre museum, Paris is 10 mins
Travel time from champs$\_$lyses, Paris to notre$\_$dame cathedral, Paris is 3 mins
Travel time from champs$\_$lyses, Paris to sacr$\_$cur basilica, Paris is 1 mins
Travel time from champs$\_$lyses, Paris to palace of versailles, Paris is 46 mins
Travel time from champs$\_$lyses, Paris to montmartre, Paris is 25 mins
Travel time from champs$\_$lyses, Paris to sainte$\_$chapelle, Paris is 5 mins
Travel time from champs$\_$lyses, Paris to centre pompidou, Paris is 8 mins
Travel time from champs$\_$lyses, Paris to muse dorsay, Paris is 11 mins
Travel time from montmartre, Paris to eiffel tower, Paris is 24 mins
Travel time from montmartre, Paris to louvre museum, Paris is 20 mins
Travel time from montmartre, Paris to notre$\_$dame cathedral, Paris is 27 mins
Travel time from montmartre, Paris to sacr$\_$cur basilica, Paris is 25 mins
Travel time from montmartre, Paris to palace of versailles, Paris is 48 mins
Travel time from montmartre, Paris to champs$\_$lyses, Paris is 25 mins
Travel time from montmartre, Paris to sainte$\_$chapelle, Paris is 29 mins
Travel time from montmartre, Paris to centre pompidou, Paris is 23 mins
Travel time from montmartre, Paris to muse dorsay, Paris is 22 mins
Travel time from sainte$\_$chapelle, Paris to eiffel tower, Paris is 14 mins
Travel time from sainte$\_$chapelle, Paris to louvre museum, Paris is 7 mins
Travel time from sainte$\_$chapelle, Paris to notre$\_$dame cathedral, Paris is 3 mins
Travel time from sainte$\_$chapelle, Paris to sacr$\_$cur basilica, Paris is 5 mins
Travel time from sainte$\_$chapelle, Paris to palace of versailles, Paris is 47 mins
Travel time from sainte$\_$chapelle, Paris to champs$\_$lyses, Paris is 5 mins
Travel time from sainte$\_$chapelle, Paris to montmartre, Paris is 25 mins
Travel time from sainte$\_$chapelle, Paris to centre pompidou, Paris is 8 mins
Travel time from sainte$\_$chapelle, Paris to muse dorsay, Paris is 8 mins
Travel time from centre pompidou, Paris to eiffel tower, Paris is 18 mins
Travel time from centre pompidou, Paris to louvre museum, Paris is 11 mins
Travel time from centre pompidou, Paris to notre$\_$dame cathedral, Paris is 3 mins
Travel time from centre pompidou, Paris to sacr$\_$cur basilica, Paris is 2 mins
Travel time from centre pompidou, Paris to palace of versailles, Paris is 47 mins
Travel time from centre pompidou, Paris to champs$\_$lyses, Paris is 2 mins
Travel time from centre pompidou, Paris to montmartre, Paris is 26 mins
Travel time from centre pompidou, Paris to sainte$\_$chapelle, Paris is 6 mins
Travel time from centre pompidou, Paris to muse dorsay, Paris is 11 mins
Travel time from muse dorsay, Paris to eiffel tower, Paris is 11 mins
Travel time from muse dorsay, Paris to louvre museum, Paris is 5 mins
Travel time from muse dorsay, Paris to notre$\_$dame cathedral, Paris is 9 mins
Travel time from muse dorsay, Paris to sacr$\_$cur basilica, Paris is 10 mins
Travel time from muse dorsay, Paris to palace of versailles, Paris is 45 mins
Travel time from muse dorsay, Paris to champs$\_$lyses, Paris is 10 mins
Travel time from muse dorsay, Paris to montmartre, Paris is 23 mins
Travel time from muse dorsay, Paris to sainte$\_$chapelle, Paris is 10 mins
Travel time from muse dorsay, Paris to centre pompidou, Paris is 14 mins
}
\bibliography{bibliography,daniel,general,travel-planning}

\end{document}

